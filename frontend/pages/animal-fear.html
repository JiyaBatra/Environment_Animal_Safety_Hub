<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Fear Atlas - The World Through Animal Eyes | Environment & Animal Safety Hub</title>
  <meta name="description" content="Interactive map showing how animals perceive human spaces: roads, markets, schools, festivals. Discover sound levels, smells, threats, and stress from animal perspectives.">
  <meta name="keywords" content="animal perception, fear atlas, animal senses, urban wildlife, animal stress, sensory overload, animal perspective">

  <!-- Favicon -->
  <link rel="icon" href="../assets/icons/favicon.ico" type="image/x-icon">

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap" rel="stylesheet">

  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <!-- Global Styles -->
  <link rel="stylesheet" href="../css/style.css">
  <link rel="stylesheet" href="../css/pwa.css">
  
  <!-- Component Styles -->
  <link rel="stylesheet" href="../css/components/navbar.css">
  <link rel="stylesheet" href="../css/components/footer.css">

  <!-- Page-specific Styles -->
  <style>
    :root {
      --road-color: #7F8C8D;
      --market-color: #F39C12;
      --school-color: #3498DB;
      --festival-color: #E74C3C;
      --park-color: #27AE60;
      --residential-color: #8E44AD;
      --industrial-color: #34495E;
      --high-stress: #E74C3C;
      --medium-stress: #F39C12;
      --low-stress: #27AE60;
      --safe-color: #3498DB;
      --bg-dark: #1A252F;
      --bg-light: #F8F9FA;
    }

    body {
      font-family: 'Poppins', sans-serif;
      margin: 0;
      background: var(--bg-dark);
      color: white;
      line-height: 1.6;
    }

    /* Hero Section */
    .atlas-hero {
      background: linear-gradient(135deg, #1A252F 0%, #2C3E50 100%);
      color: white;
      padding: 100px 20px 60px;
      text-align: center;
      position: relative;
      overflow: hidden;
    }

    .atlas-hero::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: 
        radial-gradient(circle at 20% 80%, rgba(231, 76, 60, 0.1) 0%, transparent 50%),
        radial-gradient(circle at 80% 20%, rgba(52, 152, 219, 0.1) 0%, transparent 50%);
    }

    .atlas-hero h1 {
      font-family: 'Orbitron', monospace;
      font-size: 4rem;
      margin-bottom: 1rem;
      position: relative;
      z-index: 1;
      text-shadow: 0 0 20px rgba(52, 152, 219, 0.5);
    }

    .hero-subtitle {
      font-size: 1.3rem;
      max-width: 800px;
      margin: 0 auto 40px;
      opacity: 0.95;
      position: relative;
      z-index: 1;
      color: #AED6F1;
    }

    .hero-instruction {
      background: rgba(52, 152, 219, 0.2);
      backdrop-filter: blur(10px);
      padding: 15px 30px;
      border-radius: 50px;
      display: inline-block;
      margin-top: 20px;
      position: relative;
      z-index: 1;
      border: 2px solid rgba(52, 152, 219, 0.4);
      font-family: 'Orbitron', monospace;
    }

    /* Perspective Toggle */
    .perspective-toggle {
      max-width: 800px;
      margin: 40px auto;
      padding: 20px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 20px;
      backdrop-filter: blur(10px);
    }

    .toggle-container {
      display: flex;
      justify-content: center;
      gap: 20px;
      flex-wrap: wrap;
    }

    .perspective-btn {
      padding: 15px 30px;
      border: 2px solid;
      border-radius: 50px;
      background: transparent;
      color: white;
      font-family: 'Orbitron', monospace;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .perspective-btn.active {
      transform: translateY(-5px);
      box-shadow: 0 10px 20px rgba(0,0,0,0.3);
    }

    .human-btn { border-color: #3498DB; }
    .human-btn.active { background: #3498DB; }

    .animal-btn { border-color: #E74C3C; }
    .animal-btn.active { background: #E74C3C; }

    /* Interactive Map Container */
    .map-container {
      max-width: 1400px;
      margin: 40px auto;
      padding: 20px;
      position: relative;
    }

    .map-canvas {
      position: relative;
      width: 100%;
      height: 800px;
      background: linear-gradient(135deg, #2C3E50, #1A252F);
      border-radius: 20px;
      overflow: hidden;
      box-shadow: 0 20px 60px rgba(0,0,0,0.5);
      border: 4px solid rgba(255,255,255,0.1);
    }

    /* Map Background */
    .map-grid {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-image: 
        linear-gradient(rgba(255,255,255,0.05) 1px, transparent 1px),
        linear-gradient(90deg, rgba(255,255,255,0.05) 1px, transparent 1px);
      background-size: 50px 50px;
    }

    /* Map Zones */
    .map-zone {
      position: absolute;
      border-radius: 15px;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-direction: column;
      text-align: center;
      padding: 20px;
      overflow: hidden;
    }

    .map-zone:hover {
      transform: scale(1.05);
      z-index: 10;
      box-shadow: 0 0 40px rgba(255,255,255,0.2);
    }

    .map-zone.active {
      animation: pulse 2s infinite;
      z-index: 20;
    }

    @keyframes pulse {
      0%, 100% { box-shadow: 0 0 20px rgba(255,255,255,0.3); }
      50% { box-shadow: 0 0 40px rgba(255,255,255,0.6); }
    }

    .zone-icon {
      font-size: 3rem;
      margin-bottom: 10px;
      filter: drop-shadow(2px 2px 4px rgba(0,0,0,0.5));
    }

    .zone-name {
      font-family: 'Orbitron', monospace;
      font-size: 1.2rem;
      font-weight: bold;
      text-shadow: 1px 1px 3px rgba(0,0,0,0.8);
    }

    /* Zone Positions & Colors */
    .road-zone {
      background: linear-gradient(135deg, rgba(127, 140, 141, 0.8), rgba(127, 140, 141, 0.5));
      width: 70%;
      height: 100px;
      top: 100px;
      left: 15%;
      border: 3px dashed rgba(255,255,255,0.3);
    }

    .market-zone {
      background: linear-gradient(135deg, rgba(243, 156, 18, 0.8), rgba(243, 156, 18, 0.5));
      width: 200px;
      height: 200px;
      top: 250px;
      left: 10%;
      border: 3px solid rgba(243, 156, 18, 0.8);
    }

    .school-zone {
      background: linear-gradient(135deg, rgba(52, 152, 219, 0.8), rgba(52, 152, 219, 0.5));
      width: 250px;
      height: 200px;
      top: 250px;
      right: 10%;
      border: 3px solid rgba(52, 152, 219, 0.8);
    }

    .festival-zone {
      background: linear-gradient(135deg, rgba(231, 76, 60, 0.8), rgba(231, 76, 60, 0.5));
      width: 300px;
      height: 250px;
      top: 500px;
      left: 35%;
      border: 3px solid rgba(231, 76, 60, 0.8);
    }

    .park-zone {
      background: linear-gradient(135deg, rgba(39, 174, 96, 0.8), rgba(39, 174, 96, 0.5));
      width: 220px;
      height: 180px;
      top: 50px;
      right: 10%;
      border: 3px solid rgba(39, 174, 96, 0.8);
    }

    .residential-zone {
      background: linear-gradient(135deg, rgba(142, 68, 173, 0.8), rgba(142, 68, 173, 0.5));
      width: 180px;
      height: 220px;
      top: 400px;
      left: 70%;
      border: 3px solid rgba(142, 68, 173, 0.8);
    }

    .industrial-zone {
      background: linear-gradient(135deg, rgba(52, 73, 94, 0.8), rgba(52, 73, 94, 0.5));
      width: 280px;
      height: 150px;
      top: 600px;
      right: 5%;
      border: 3px solid rgba(52, 73, 94, 0.8);
    }

    /* Perception Panel */
    .perception-panel {
      position: fixed;
      top: 50%;
      right: 20px;
      transform: translateY(-50%);
      width: 400px;
      background: rgba(26, 37, 47, 0.95);
      backdrop-filter: blur(20px);
      border-radius: 20px;
      padding: 30px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.5);
      border: 2px solid rgba(52, 152, 219, 0.3);
      display: none;
      z-index: 100;
      animation: slideIn 0.5s ease;
    }

    @keyframes slideIn {
      from { transform: translateY(-50%) translateX(100%); opacity: 0; }
      to { transform: translateY(-50%) translateX(0); opacity: 1; }
    }

    .panel-header {
      display: flex;
      align-items: center;
      gap: 15px;
      margin-bottom: 25px;
    }

    .panel-icon {
      font-size: 2.5rem;
      width: 70px;
      height: 70px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
    }

    .panel-title {
      font-family: 'Orbitron', monospace;
      font-size: 1.8rem;
      margin: 0;
    }

    .perspective-indicator {
      display: inline-block;
      padding: 5px 15px;
      border-radius: 20px;
      font-size: 0.9rem;
      margin-left: 10px;
      background: rgba(231, 76, 60, 0.3);
      color: #FF6B6B;
      border: 1px solid rgba(231, 76, 60, 0.5);
    }

    /* Sensory Metrics */
    .sensory-metrics {
      margin: 30px 0;
    }

    .metric-item {
      margin-bottom: 20px;
    }

    .metric-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 10px;
    }

    .metric-name {
      display: flex;
      align-items: center;
      gap: 10px;
      font-weight: bold;
      color: #AED6F1;
    }

    .metric-value {
      font-family: 'Orbitron', monospace;
      font-size: 1.2rem;
    }

    .metric-bar {
      height: 20px;
      background: rgba(255,255,255,0.1);
      border-radius: 10px;
      overflow: hidden;
      position: relative;
    }

    .metric-fill {
      height: 100%;
      border-radius: 10px;
      transition: width 1s ease;
      position: relative;
      overflow: hidden;
    }

    .metric-fill::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
      animation: shine 2s infinite;
    }

    @keyframes shine {
      0% { transform: translateX(-100%); }
      100% { transform: translateX(100%); }
    }

    /* Sound waves animation */
    .sound-waves {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
    }

    .wave {
      position: absolute;
      border: 2px solid;
      border-radius: 50%;
      opacity: 0;
      animation: ripple 2s linear infinite;
    }

    @keyframes ripple {
      0% {
        transform: scale(0.1);
        opacity: 1;
      }
      100% {
        transform: scale(1);
        opacity: 0;
      }
    }

    /* Threat Levels */
    .threat-levels {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 15px;
      margin: 25px 0;
    }

    .threat-item {
      text-align: center;
      padding: 15px;
      background: rgba(255,255,255,0.05);
      border-radius: 10px;
      transition: transform 0.3s ease;
    }

    .threat-item:hover {
      transform: translateY(-5px);
      background: rgba(255,255,255,0.1);
    }

    .threat-icon {
      font-size: 1.5rem;
      margin-bottom: 10px;
    }

    /* Animal Reactions */
    .animal-reactions {
      margin-top: 30px;
      padding: 20px;
      background: rgba(0,0,0,0.3);
      border-radius: 15px;
      border-left: 4px solid #E74C3C;
    }

    .reaction-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 15px;
      margin-top: 15px;
    }

    .reaction-item {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 10px;
      background: rgba(231, 76, 60, 0.1);
      border-radius: 8px;
      font-size: 0.9rem;
    }

    .reaction-icon {
      width: 30px;
      height: 30px;
      background: #E74C3C;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.8rem;
    }

    /* Animal Guides */
    .animal-guides {
      display: flex;
      gap: 15px;
      margin-top: 30px;
      overflow-x: auto;
      padding: 10px 0;
    }

    .animal-guide {
      flex-shrink: 0;
      width: 100px;
      text-align: center;
      cursor: pointer;
      transition: all 0.3s ease;
      opacity: 0.6;
    }

    .animal-guide.active {
      opacity: 1;
      transform: scale(1.1);
    }

    .animal-avatar {
      width: 70px;
      height: 70px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 2rem;
      margin: 0 auto 10px;
      border: 3px solid;
      background: rgba(255,255,255,0.1);
    }

    /* Comparison View */
    .comparison-view {
      max-width: 1200px;
      margin: 80px auto;
      padding: 40px;
      background: rgba(255,255,255,0.05);
      border-radius: 30px;
      backdrop-filter: blur(10px);
    }

    .comparison-title {
      font-family: 'Orbitron', monospace;
      font-size: 2.5rem;
      text-align: center;
      margin-bottom: 40px;
      color: #AED6F1;
    }

    .comparison-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 30px;
    }

    .comparison-card {
      background: rgba(26, 37, 47, 0.8);
      border-radius: 20px;
      padding: 30px;
      border: 2px solid rgba(52, 152, 219, 0.3);
      transition: transform 0.3s ease;
    }

    .comparison-card:hover {
      transform: translateY(-10px);
      border-color: rgba(52, 152, 219, 0.8);
    }

    .comparison-header {
      display: flex;
      align-items: center;
      gap: 15px;
      margin-bottom: 20px;
    }

    .comparison-icon {
      width: 50px;
      height: 50px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.5rem;
      color: white;
    }

    /* Action Section */
    .action-section {
      text-align: center;
      padding: 80px 20px;
      background: linear-gradient(135deg, #2C3E50, #1A252F);
      border-top: 4px solid rgba(52, 152, 219, 0.5);
      margin-top: 80px;
    }

    .action-title {
      font-family: 'Orbitron', monospace;
      font-size: 2.8rem;
      margin-bottom: 30px;
      color: #AED6F1;
    }

    .action-buttons {
      display: flex;
      justify-content: center;
      gap: 20px;
      flex-wrap: wrap;
      margin-top: 40px;
    }

    .action-btn {
      padding: 15px 30px;
      border-radius: 50px;
      text-decoration: none;
      font-weight: 600;
      transition: all 0.3s ease;
      display: inline-flex;
      align-items: center;
      gap: 10px;
      font-family: 'Orbitron', monospace;
      background: rgba(52, 152, 219, 0.2);
      color: white;
      border: 2px solid #3498DB;
    }

    .action-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 10px 20px rgba(52, 152, 219, 0.3);
      background: #3498DB;
    }

    /* Responsive Design */
    @media (max-width: 1200px) {
      .perception-panel {
        position: fixed;
        top: auto;
        bottom: 0;
        left: 0;
        right: 0;
        transform: none;
        width: 100%;
        max-height: 70vh;
        overflow-y: auto;
        border-radius: 20px 20px 0 0;
        animation: slideUp 0.5s ease;
      }

      @keyframes slideUp {
        from { transform: translateY(100%); opacity: 0; }
        to { transform: translateY(0); opacity: 1; }
      }
    }

    @media (max-width: 768px) {
      .atlas-hero h1 {
        font-size: 2.5rem;
      }
      
      .hero-subtitle {
        font-size: 1.1rem;
      }
      
      .map-canvas {
        height: 600px;
      }
      
      .action-buttons {
        flex-direction: column;
      }
      
      .action-btn {
        width: 100%;
        justify-content: center;
      }
      
      .comparison-grid {
        grid-template-columns: 1fr;
      }
    }

    @media (max-width: 480px) {
      .atlas-hero {
        padding: 80px 20px 40px;
      }
      
      .atlas-hero h1 {
        font-size: 2rem;
      }
      
      .map-zone {
        padding: 10px;
      }
      
      .zone-icon {
        font-size: 2rem;
      }
      
      .zone-name {
        font-size: 0.9rem;
      }
    }

    /* Close Button */
    .close-panel {
      position: absolute;
      top: 20px;
      right: 20px;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: rgba(231, 76, 60, 0.2);
      border: 2px solid rgba(231, 76, 60, 0.5);
      color: #FF6B6B;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.5rem;
      transition: all 0.3s ease;
    }

    .close-panel:hover {
      background: rgba(231, 76, 60, 0.4);
      transform: rotate(90deg);
    }
  </style>
</head>
<body>
  <!-- Navigation -->
  <div id="navbar-container"></div>

  <!-- Hero Section -->
  <section class="atlas-hero">
    <h1><i class="fas fa-map-marked-alt"></i> FEAR ATLAS</h1>
    <p class="hero-subtitle">See human spaces through animal senses: sound, smell, threat, and stress levels from their perspective</p>
    <div class="hero-instruction">
      <i class="fas fa-eye"></i> Click locations to reveal animal perceptions
    </div>
  </section>

  <!-- Perspective Toggle -->
  <div class="perspective-toggle">
    <div class="toggle-container">
      <button class="perspective-btn human-btn active" onclick="setPerspective('human')">
        <i class="fas fa-user"></i> Human View
      </button>
      <button class="perspective-btn animal-btn" onclick="setPerspective('animal')">
        <i class="fas fa-paw"></i> Animal View
      </button>
    </div>
    <p style="text-align: center; margin-top: 15px; color: #AED6F1; font-size: 0.9rem;">
      Switch between human and animal perspectives to understand the difference
    </p>
  </div>

  <!-- Interactive Map -->
  <div class="map-container">
    <div class="map-canvas" id="mapCanvas">
      <!-- Grid Background -->
      <div class="map-grid"></div>
      
      <!-- Map Zones -->
      <div class="map-zone road-zone" onclick="showPerception('road')">
        <div class="zone-icon"><i class="fas fa-road"></i></div>
        <div class="zone-name">BUSY ROAD</div>
      </div>
      
      <div class="map-zone market-zone" onclick="showPerception('market')">
        <div class="zone-icon"><i class="fas fa-shopping-cart"></i></div>
        <div class="zone-name">MARKET</div>
      </div>
      
      <div class="map-zone school-zone" onclick="showPerception('school')">
        <div class="zone-icon"><i class="fas fa-school"></i></div>
        <div class="zone-name">SCHOOL</div>
      </div>
      
      <div class="map-zone festival-zone" onclick="showPerception('festival')">
        <div class="zone-icon"><i class="fas fa-music"></i></div>
        <div class="zone-name">FESTIVAL</div>
      </div>
      
      <div class="map-zone park-zone" onclick="showPerception('park')">
        <div class="zone-icon"><i class="fas fa-tree"></i></div>
        <div class="zone-name">CITY PARK</div>
      </div>
      
      <div class="map-zone residential-zone" onclick="showPerception('residential')">
        <div class="zone-icon"><i class="fas fa-home"></i></div>
        <div class="zone-name">RESIDENTIAL AREA</div>
      </div>
      
      <div class="map-zone industrial-zone" onclick="showPerception('industrial')">
        <div class="zone-icon"><i class="fas fa-industry"></i></div>
        <div class="zone-name">INDUSTRIAL ZONE</div>
      </div>
      
      <!-- Sound Waves (will be added by JavaScript) -->
      <div class="sound-waves" id="soundWaves"></div>
    </div>
  </div>

  <!-- Perception Panel -->
  <div class="perception-panel" id="perceptionPanel">
    <button class="close-panel" onclick="closePanel()">×</button>
    
    <div class="panel-header">
      <div class="panel-icon" id="panelIcon">
        <i class="fas fa-road"></i>
      </div>
      <div>
        <h3 class="panel-title" id="panelTitle">Busy Road</h3>
        <span class="perspective-indicator" id="perspectiveIndicator">
          <i class="fas fa-paw"></i> Animal View
        </span>
      </div>
    </div>
    
    <div class="sensory-metrics">
      <div class="metric-item">
        <div class="metric-header">
          <div class="metric-name">
            <i class="fas fa-volume-up"></i>
            <span>Sound Level</span>
          </div>
          <div class="metric-value" id="soundValue">90 dB</div>
        </div>
        <div class="metric-bar">
          <div class="metric-fill" id="soundFill" style="width: 90%; background: linear-gradient(90deg, #3498DB, #2980B9);"></div>
        </div>
      </div>
      
      <div class="metric-item">
        <div class="metric-header">
          <div class="metric-name">
            <i class="fas fa-wind"></i>
            <span>Smell Intensity</span>
          </div>
          <div class="metric-value" id="smellValue">High</div>
        </div>
        <div class="metric-bar">
          <div class="metric-fill" id="smellFill" style="width: 80%; background: linear-gradient(90deg, #F39C12, #D68910);"></div>
        </div>
      </div>
      
      <div class="metric-item">
        <div class="metric-header">
          <div class="metric-name">
            <i class="fas fa-exclamation-triangle"></i>
            <span>Threat Level</span>
          </div>
          <div class="metric-value" id="threatValue">Extreme</div>
        </div>
        <div class="metric-bar">
          <div class="metric-fill" id="threatFill" style="width: 95%; background: linear-gradient(90deg, #E74C3C, #C0392B);"></div>
        </div>
      </div>
      
      <div class="metric-item">
        <div class="metric-header">
          <div class="metric-name">
            <i class="fas fa-heartbeat"></i>
            <span>Stress Level</span>
          </div>
          <div class="metric-value" id="stressValue">Severe</div>
        </div>
        <div class="metric-bar">
          <div class="metric-fill" id="stressFill" style="width: 85%; background: linear-gradient(90deg, #8E44AD, #6C3483);"></div>
        </div>
      </div>
    </div>
    
    <div class="animal-reactions">
      <h4 style="margin-bottom: 15px; color: #FF6B6B;">
        <i class="fas fa-running"></i> Animal Reactions
      </h4>
      <div class="reaction-grid" id="reactionGrid">
        <!-- Filled by JavaScript -->
      </div>
    </div>
    
    <!-- Animal Guides -->
    <div style="margin-top: 25px;">
      <h4 style="margin-bottom: 15px; color: #AED6F1;">
        <i class="fas fa-paw"></i> View Through Different Animals
      </h4>
      <div class="animal-guides" id="animalGuides">
        <!-- Filled by JavaScript -->
      </div>
    </div>
  </div>

  <!-- Comparison View -->
  <section class="comparison-view">
    <h2 class="comparison-title">Human vs Animal Perception</h2>
    <p style="text-align: center; max-width: 800px; margin: 0 auto 40px; color: #BDC3C7;">
      The same environment experienced completely differently
    </p>
    
    <div class="comparison-grid">
      <div class="comparison-card">
        <div class="comparison-header">
          <div class="comparison-icon" style="background: var(--road-color);">
            <i class="fas fa-road"></i>
          </div>
          <h3 style="margin: 0; color: #AED6F1;">Human: "Road"</h3>
        </div>
        <ul style="list-style: none; padding: 0; color: #BDC3C7;">
          <li style="margin-bottom: 10px; display: flex; align-items: center; gap: 10px;">
            <i class="fas fa-volume-up" style="color: #3498DB;"></i>
            <span>Background noise: 70-85 dB</span>
          </li>
          <li style="margin-bottom: 10px; display: flex; align-items: center; gap: 10px;">
            <i class="fas fa-wind" style="color: #F39C12;"></i>
            <span>Exhaust fumes, occasional food smells</span>
          </li>
          <li style="margin-bottom: 10px; display: flex; align-items: center; gap: 10px;">
            <i class="fas fa-exclamation-triangle" style="color: #E74C3C;"></i>
            <span>Low threat: traffic rules provide safety</span>
          </li>
          <li style="display: flex; align-items: center; gap: 10px;">
            <i class="fas fa-heartbeat" style="color: #8E44AD;"></i>
            <span>Minimal stress: familiar environment</span>
          </li>
        </ul>
      </div>
      
      <div class="comparison-card">
        <div class="comparison-header">
          <div class="comparison-icon" style="background: var(--road-color);">
            <i class="fas fa-paw"></i>
          </div>
          <h3 style="margin: 0; color: #AED6F1;">Animal: "Death Zone"</h3>
        </div>
        <ul style="list-style: none; padding: 0; color: #BDC3C7;">
          <li style="margin-bottom: 10px; display: flex; align-items: center; gap: 10px;">
            <i class="fas fa-volume-up" style="color: #3498DB;"></i>
            <span>Painful noise: 90-120 dB (like jet engine)</span>
          </li>
          <li style="margin-bottom: 10px; display: flex; align-items: center; gap: 10px;">
            <i class="fas fa-wind" style="color: #F39C12;"></i>
            <span>Overpowering chemical smells (400x human sensitivity)</span>
          </li>
          <li style="margin-bottom: 10px; display: flex; align-items: center; gap: 10px;">
            <i class="fas fa-exclamation-triangle" style="color: #E74C3C;"></i>
            <span>Extreme threat: unpredictable fast-moving predators</span>
          </li>
          <li style="display: flex; align-items: center; gap: 10px;">
            <i class="fas fa-heartbeat" style="color: #8E44AD;"></i>
            <span>Severe stress: fight-or-flight constantly activated</span>
          </li>
        </ul>
      </div>
    </div>
  </section>

  <!-- Sensory Sensitivity Section -->
  <section class="comparison-view" style="margin-top: 40px;">
    <h2 class="comparison-title">Sensory Superpowers</h2>
    <p style="text-align: center; max-width: 800px; margin: 0 auto 40px; color: #BDC3C7;">
      Animals experience the world with senses far beyond human capability
    </p>
    
    <div class="threat-levels">
      <div class="threat-item">
        <div class="threat-icon" style="color: #3498DB;">
          <i class="fas fa-ear-deaf"></i>
        </div>
        <h4 style="margin: 10px 0 5px; color: #AED6F1;">Hearing</h4>
        <p style="margin: 0; font-size: 0.9rem; color: #BDC3C7;">
          Dogs: 4x range<br>
          Bats: Ultrasound<br>
          Elephants: Infrasound
        </p>
      </div>
      
      <div class="threat-item">
        <div class="threat-icon" style="color: #F39C12;">
          <i class="fas fa-wind"></i>
        </div>
        <h4 style="margin: 10px 0 5px; color: #AED6F1;">Smell</h4>
        <p style="margin: 0; font-size: 0.9rem; color: #BDC3C7;">
          Dogs: 10,000-100,000x better<br>
          Bears: 7 miles range<br>
          Sharks: 1 ppm in water
        </p>
      </div>
      
      <div class="threat-item">
        <div class="threat-icon" style="color: #27AE60;">
          <i class="fas fa-eye"></i>
        </div>
        <h4 style="margin: 10px 0 5px; color: #AED6F1;">Vision</h4>
        <p style="margin: 0; font-size: 0.9rem; color: #BDC3C7;">
          Birds: UV light<br>
          Snakes: Infrared<br>
          Insects: 300° field
        </p>
      </div>
      
      <div class="threat-item">
        <div class="threat-icon" style="color: #8E44AD;">
          <i class="fas fa-vibrate"></i>
        </div>
        <h4 style="margin: 10px 0 5px; color: #AED6F1;">Vibration</h4>
        <p style="margin: 0; font-size: 0.9rem; color: #BDC3C7;">
          Spiders: Web vibrations<br>
          Elephants: Ground signals<br>
          Fish: Lateral line
        </p>
      </div>
      
      <div class="threat-item">
        <div class="threat-icon" style="color: #E74C3C;">
          <i class="fas fa-magnet"></i>
        </div>
        <h4 style="margin: 10px 0 5px; color: #AED6F1;">Magnetic</h4>
        <p style="margin: 0; font-size: 0.9rem; color: #BDC3C7;">
          Birds: Internal compass<br>
          Turtles: Ocean navigation<br>
          Bees: Field detection
        </p>
      </div>
      
      <div class="threat-item">
        <div class="threat-icon" style="color: #1ABC9C;">
          <i class="fas fa-bolt"></i>
        </div>
        <h4 style="margin: 10px 0 5px; color: #AED6F1;">Electrical</h4>
        <p style="margin: 0; font-size: 0.9rem; color: #BDC3C7;">
          Sharks: Bioelectric fields<br>
          Platypus: Muscle signals<br>
          Bees: Flower charges
        </p>
      </div>
    </div>
  </section>

  <!-- Action Section -->
  <section class="action-section">
    <h2 class="action-title">Create Animal-Friendly Spaces</h2>
    <p style="max-width: 800px; margin: 0 auto 30px; color: #BDC3C7; font-size: 1.2rem;">
      Now that you understand their perspective, here's how you can help
    </p>
    
    <div class="action-buttons">
      <a href="../pages/community-action-hub.html" class="action-btn">
        <i class="fas fa-users"></i> Advocate for Wildlife Corridors
      </a>
      <a href="../pages/education.html" class="action-btn">
        <i class="fas fa-graduation-cap"></i> Educate About Sensory Pollution
      </a>
      <a href="../pages/volunteer.html" class="action-btn">
        <i class="fas fa-hands-helping"></i> Create Safe Urban Spaces
      </a>
    </div>
    
    <div style="margin-top: 50px; padding: 30px; background: rgba(52, 152, 219, 0.1); border-radius: 20px; max-width: 800px; margin-left: auto; margin-right: auto; border: 2px solid rgba(52, 152, 219, 0.3);">
      <h4 style="color: #AED6F1;"><i class="fas fa-handshake"></i> Empathy Pledge</h4>
      <p style="font-style: italic; color: #BDC3C7;">
        "I will remember that animals experience our world with different senses. I will consider their perspective when planning, building, or using shared spaces."
      </p>
      <button onclick="takeEmpathyPledge()" style="
        margin-top: 20px;
        padding: 12px 30px;
        background: rgba(231, 76, 60, 0.2);
        color: #FF6B6B;
        border: 2px solid rgba(231, 76, 60, 0.5);
        border-radius: 50px;
        cursor: pointer;
        font-family: 'Orbitron', monospace;
        font-weight: bold;
        font-size: 1rem;
        transition: all 0.3s ease;
      ">
        <i class="fas fa-signature"></i> I Pledge Empathy
      </button>
      <div id="pledgeCounter" style="margin-top: 15px; font-size: 0.9rem; color: #7F8C8D;">
        <span id="pledgeCount">2,843</span> people have taken this pledge
      </div>
    </div>
  </section>

  <!-- Footer -->
  <div id="footer-container"></div>

  <!-- Scripts -->
  <script>
    // Load navbar and footer
    fetch('../components/navbar.html')
      .then(r => r.text())
      .then(html => {
        document.getElementById('navbar-container').innerHTML = html;
      });
    
    fetch('../components/footer.html')
      .then(r => r.text())
      .then(html => {
        document.getElementById('footer-container').innerHTML = html;
      });

    // Global state
    let currentPerspective = 'human';
    let currentZone = null;
    let currentAnimal = 'dog';

    // Perception data for each location
    const perceptionData = {
      road: {
        name: "BUSY ROAD",
        icon: "fas fa-road",
        human: {
          sound: { value: "75 dB", level: 75, description: "Traffic noise, horns" },
          smell: { value: "Moderate", level: 60, description: "Exhaust fumes, occasional food" },
          threat: { value: "Low", level: 30, description: "Rules provide safety" },
          stress: { value: "Low", level: 20, description: "Familiar environment" }
        },
        animal: {
          sound: { value: "110 dB", level: 90, description: "Painful roar like jet engine" },
          smell: { value: "Extreme", level: 95, description: "Overpowering chemical cocktail" },
          threat: { value: "Extreme", level: 95, description: "Unpredictable fast-moving death" },
          stress: { value: "Severe", level: 90, description: "Constant fight-or-flight" }
        },
        reactions: [
          { icon: "fas fa-running", text: "Panic running across" },
          { icon: "fas fa-car-crash", text: "Vehicle collision risk" },
          { icon: "fas fa-deaf", text: "Temporary hearing loss" },
          { icon: "fas fa-heart", text: "Heart rate doubles" }
        ]
      },
      market: {
        name: "MARKET",
        icon: "fas fa-shopping-cart",
        human: {
          sound: { value: "70 dB", level: 70, description: "Crowd chatter, vendors" },
          smell: { value: "Varied", level: 50, description: "Food, spices, people" },
          threat: { value: "Very Low", level: 10, description: "Social space" },
          stress: { value: "Low", level: 30, description: "Some crowding" }
        },
        animal: {
          sound: { value: "90 dB", level: 80, description: "Overwhelming chaotic noise" },
          smell: { value: "Overload", level: 85, description: "Thousands of conflicting scents" },
          threat: { value: "High", level: 70, description: "Trapped with predators" },
          stress: { value: "High", level: 75, description: "No escape routes" }
        },
        reactions: [
          { icon: "fas fa-hide", text: "Hide under stalls" },
          { icon: "fas fa-search", text: "Desperate food search" },
          { icon: "fas fa-fight", text: "Aggressive defense" },
          { icon: "fas fa-escape", text: "Attempt escape" }
        ]
      },
      school: {
        name: "SCHOOL",
        icon: "fas fa-school",
        human: {
          sound: { value: "65 dB", level: 65, description: "Children playing, bells" },
          smell: { value: "Mild", level: 40, description: "Chalk, food, cleaning" },
          threat: { value: "None", level: 5, description: "Safe learning space" },
          stress: { value: "Low", level: 25, description: "Routine environment" }
        },
        animal: {
          sound: { value: "85 dB", level: 75, description: "High-pitched unpredictable screams" },
          smell: { value: "Intense", level: 70, description: "Fear pheromones, chemicals" },
          threat: { value: "Medium", level: 60, description: "Curious unpredictable beings" },
          stress: { value: "Medium", level: 65, description: "No safe hiding spots" }
        },
        reactions: [
          { icon: "fas fa-climb", text: "Climb fences/walls" },
          { icon: "fas fa-dig", text: "Dig to escape" },
          { icon: "fas fa-freeze", text: "Freeze in place" },
          { icon: "fas fa-nest", text: "Abandon nests" }
        ]
      },
      festival: {
        name: "FESTIVAL",
        icon: "fas fa-music",
        human: {
          sound: { value: "85 dB", level: 85, description: "Music, celebration" },
          smell: { value: "Festive", level: 55, description: "Food, smoke, perfume" },
          threat: { value: "Low", level: 20, description: "Controlled fun" },
          stress: { value: "Medium", level: 50, description: "Crowds but enjoyable" }
        },
        animal: {
          sound: { value: "120+ dB", level: 98, description: "Earth-shaking explosions" },
          smell: { value: "Toxic", level: 90, description: "Fireworks chemicals, alcohol" },
          threat: { value: "Extreme", level: 95, description: "Apocalypse simulation" },
          stress: { value: "Severe", level: 95, description: "Complete sensory overload" }
        },
        reactions: [
          { icon: "fas fa-panic", text: "Complete panic" },
          { icon: "fas fa-injured", text: "Self-injury attempts" },
          { icon: "fas fa-lost", text: "Get lost permanently" },
          { icon: "fas fa-shock", text: "Traumatic shock" }
        ]
      },
      park: {
        name: "CITY PARK",
        icon: "fas fa-tree",
        human: {
          sound: { value: "55 dB", level: 55, description: "Birds, gentle activity" },
          smell: { value: "Natural", level: 45, description: "Grass, trees, flowers" },
          threat: { value: "None", level: 5, description: "Relaxation space" },
          stress: { value: "Very Low", level: 15, description: "Peaceful retreat" }
        },
        animal: {
          sound: { value: "75 dB", level: 65, description: "Constant human intrusion" },
          smell: { value: "Contaminated", level: 60, description: "Dog urine, trash, pesticides" },
          threat: { value: "Medium", level: 50, description: "Predators on leashes" },
          stress: { value: "Medium", level: 55, description: "No true wilderness" }
        },
        reactions: [
          { icon: "fas fa-night", text: "Become nocturnal" },
          { icon: "fas fa-camouflage", text: "Perfect camouflage" },
          { icon: "fas fa-burrow", text: "Create deep burrows" },
          { icon: "fas fa-avoid", text: "Avoid open areas" }
        ]
      },
      residential: {
        name: "RESIDENTIAL AREA",
        icon: "fas fa-home",
        human: {
          sound: { value: "50 dB", level: 50, description: "Quiet neighborhood" },
          smell: { value: "Homey", level: 35, description: "Cooking, gardens" },
          threat: { value: "None", level: 0, description: "Safe home" },
          stress: { value: "Very Low", level: 10, description: "Comfort zone" }
        },
        animal: {
          sound: { value: "70 dB", level: 60, description: "Constant TV, appliances" },
          smell: { value: "Confusing", level: 65, description: "Cleaning chemicals, pets" },
          threat: { value: "High", level: 65, description: "Territory conflicts" },
          stress: { value: "High", level: 70, description: "No natural territory" }
        },
        reactions: [
          { icon: "fas fa-garbage", text: "Raid trash cans" },
          { icon: "fas fa-fight", text: "Fight over territory" },
          { icon: "fas fa-adapt", text: "Adapt unnatural diets" },
          { icon: "fas fa-sick", text: "Develop illnesses" }
        ]
      },
      industrial: {
        name: "INDUSTRIAL ZONE",
        icon: "fas fa-industry",
        human: {
          sound: { value: "80 dB", level: 80, description: "Machinery, work" },
          smell: { value: "Industrial", level: 70, description: "Chemicals, fuel" },
          threat: { value: "Medium", level: 40, description: "Safety protocols" },
          stress: { value: "Medium", level: 60, description: "Work environment" }
        },
        animal: {
          sound: { value: "100+ dB", level: 85, description: "Deafening constant vibration" },
          smell: { value: "Poisonous", level: 95, description: "Toxic chemical clouds" },
          threat: { value: "Extreme", level: 90, description: "Invisible deadly threats" },
          stress: { value: "Severe", level: 85, description: "Environmental poisoning" }
        },
        reactions: [
          { icon: "fas fa-death", text: "Slow poisoning" },
          { icon: "fas fa-mutate", text: "Genetic mutations" },
          { icon: "fas fa-abandon", text: "Abandon young" },
          { icon: "fas fa-migrate", text: "Forced migration" }
        ]
      }
    };

    // Animal perspective data
    const animalPerspectives = {
      dog: { name: "Dog", icon: "fas fa-dog", color: "#F39C12", hearing: "4x human", smell: "10,000x better" },
      cat: { name: "Cat", icon: "fas fa-cat", color: "#8E44AD", hearing: "3x human", smell: "14x better" },
      bird: { name: "Bird", icon: "fas fa-dove", color: "#3498DB", hearing: "Similar", smell: "Poor", vision: "UV capable" },
      deer: { name: "Deer", icon: "fas fa-deer", color: "#8B4513", hearing: "Excellent", smell: "Superior", vision: "300°" },
      rat: { name: "Rat", icon: "fas fa-rat", color: "#7F8C8D", hearing: "Ultrasound", smell: "Excellent", whiskers: "Vibration" }
    };

    // Set perspective (human or animal)
    function setPerspective(perspective) {
      currentPerspective = perspective;
      
      // Update toggle buttons
      document.querySelectorAll('.perspective-btn').forEach(btn => {
        btn.classList.remove('active');
      });
      document.querySelector(`.${perspective}-btn`).classList.add('active');
      
      // Update perspective indicator
      const indicator = document.getElementById('perspectiveIndicator');
      if (perspective === 'animal') {
        indicator.innerHTML = '<i class="fas fa-paw"></i> Animal View';
        indicator.style.background = 'rgba(231, 76, 60, 0.3)';
        indicator.style.color = '#FF6B6B';
        indicator.style.borderColor = 'rgba(231, 76, 60, 0.5)';
      } else {
        indicator.innerHTML = '<i class="fas fa-user"></i> Human View';
        indicator.style.background = 'rgba(52, 152, 219, 0.3)';
        indicator.style.color = '#5DADE2';
        indicator.style.borderColor = 'rgba(52, 152, 219, 0.5)';
      }
      
      // Update map visuals
      updateMapVisuals();
      
      // Refresh current zone if open
      if (currentZone) {
        showPerception(currentZone);
      }
    }

    // Show perception for a specific zone
    function showPerception(zone) {
      currentZone = zone;
      const data = perceptionData[zone];
      const panel = document.getElementById('perceptionPanel');
      const perspective = currentPerspective === 'animal' ? data.animal : data.human;
      
      // Update panel content
      document.getElementById('panelTitle').textContent = data.name;
      document.getElementById('panelIcon').innerHTML = `<i class="${data.icon}"></i>`;
      document.getElementById('panelIcon').style.background = getZoneColor(zone);
      
      // Update metrics
      updateMetric('sound', perspective.sound);
      updateMetric('smell', perspective.smell);
      updateMetric('threat', perspective.threat);
      updateMetric('stress', perspective.stress);
      
      // Update reactions
      const reactionGrid = document.getElementById('reactionGrid');
      reactionGrid.innerHTML = '';
      data.reactions.forEach(reaction => {
        const div = document.createElement('div');
        div.className = 'reaction-item';
        div.innerHTML = `
          <div class="reaction-icon">
            <i class="${reaction.icon}"></i>
          </div>
          <span>${reaction.text}</span>
        `;
        reactionGrid.appendChild(div);
      });
      
      // Update animal guides
      updateAnimalGuides();
      
      // Show panel
      panel.style.display = 'block';
      
      // Add active class to zone
      document.querySelectorAll('.map-zone').forEach(z => z.classList.remove('active'));
      document.querySelector(`.${zone}-zone`).classList.add('active');
      
      // Create sound waves
      createSoundWaves(perspective.sound.level);
    }

    // Update a single metric
    function updateMetric(type, data) {
      document.getElementById(`${type}Value`).textContent = data.value;
      document.getElementById(`${type}Fill`).style.width = `${data.level}%`;
      
      // Set color based on level
      let color;
      if (data.level < 30) color = '#27AE60'; // Green
      else if (data.level < 60) color = '#F39C12'; // Yellow
      else if (data.level < 80) color = '#E67E22'; // Orange
      else color = '#E74C3C'; // Red
      
      document.getElementById(`${type}Fill`).style.background = `linear-gradient(90deg, ${color}, ${darkenColor(color, 20)})`;
    }

    // Get zone color
    function getZoneColor(zone) {
      const colors = {
        road: '#7F8C8D',
        market: '#F39C12',
        school: '#3498DB',
        festival: '#E74C3C',
        park: '#27AE60',
        residential: '#8E44AD',
        industrial: '#34495E'
      };
      return colors[zone];
    }

    // Darken a color
    function darkenColor(color, percent) {
      const num = parseInt(color.replace("#", ""), 16);
      const amt = Math.round(2.55 * percent);
      const R = (num >> 16) - amt;
      const G = (num >> 8 & 0x00FF) - amt;
      const B = (num & 0x0000FF) - amt;
      return "#" + (0x1000000 + (R < 255 ? R < 1 ? 0 : R : 255) * 0x10000 +
        (G < 255 ? G < 1 ? 0 : G : 255) * 0x100 +
        (B < 255 ? B < 1 ? 0 : B : 255)).toString(16).slice(1);
    }

    // Close panel
    function closePanel() {
      document.getElementById('perceptionPanel').style.display = 'none';
      document.querySelectorAll('.map-zone').forEach(z => z.classList.remove('active'));
      currentZone = null;
    }

    // Create sound waves
    function createSoundWaves(level) {
      const container = document.getElementById('soundWaves');
      container.innerHTML = '';
      
      const zoneElement = document.querySelector(`.${currentZone}-zone`);
      if (!zoneElement) return;
      
      const rect = zoneElement.getBoundingClientRect();
      const mapRect = document.getElementById('mapCanvas').getBoundingClientRect();
      
      const centerX = rect.left + rect.width/2 - mapRect.left;
      const centerY = rect.top + rect.height/2 - mapRect.top;
      
      // Create waves based on sound level
      const waveCount = Math.floor(level / 20);
      const maxRadius = Math.min(mapRect.width, mapRect.height) * 0.4;
      
      for (let i = 0; i < waveCount; i++) {
        const wave = document.createElement('div');
        wave.className = 'wave';
        wave.style.left = `${centerX}px`;
        wave.style.top = `${centerY}px`;
        wave.style.borderColor = `rgba(52, 152, 219, ${0.5 - i * 0.1})`;
        wave.style.animationDelay = `${i * 0.5}s`;
        wave.style.width = `${(i + 1) * 30}px`;
        wave.style.height = `${(i + 1) * 30}px`;
        container.appendChild(wave);
      }
    }

    // Update animal guides
    function updateAnimalGuides() {
      const container = document.getElementById('animalGuides');
      container.innerHTML = '';
      
      Object.entries(animalPerspectives).forEach(([key, animal]) => {
        const guide = document.createElement('div');
        guide.className = `animal-guide ${currentAnimal === key ? 'active' : ''}`;
        guide.onclick = () => setAnimalPerspective(key);
        
        guide.innerHTML = `
          <div class="animal-avatar" style="border-color: ${animal.color};">
            <i class="${animal.icon}"></i>
          </div>
          <div style="font-size: 0.8rem;">${animal.name}</div>
        `;
        
        container.appendChild(guide);
      });
    }

    // Set animal perspective
    function setAnimalPerspective(animal) {
      currentAnimal = animal;
      updateAnimalGuides();
      
      // Show animal-specific info
      const animalData = animalPerspectives[animal];
      showNotification(`${animalData.name} Perspective:<br>Hearing: ${animalData.hearing}, Smell: ${animalData.smell}`);
    }

    // Update map visuals based on perspective
    function updateMapVisuals() {
      const zones = document.querySelectorAll('.map-zone');
      zones.forEach(zone => {
        if (currentPerspective === 'animal') {
          // Add stress effects for animal view
          zone.style.filter = 'brightness(1.2) contrast(1.1)';
          zone.style.boxShadow = 'inset 0 0 20px rgba(231, 76, 60, 0.3)';
        } else {
          // Reset for human view
          zone.style.filter = 'none';
          zone.style.boxShadow = 'none';
        }
      });
    }

    // Show notification
    function showNotification(message) {
      const notification = document.createElement('div');
      notification.style.cssText = `
        position: fixed;
        top: 100px;
        right: 20px;
        background: rgba(26, 37, 47, 0.95);
        color: white;
        padding: 20px;
        border-radius: 15px;
        z-index: 1000;
        border-left: 4px solid #F39C12;
        animation: slideInRight 0.3s ease;
        max-width: 300px;
        backdrop-filter: blur(10px);
        box-shadow: 0 10px 30px rgba(0,0,0,0.5);
      `;
      
      notification.innerHTML = `
        <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 10px;">
          <i class="fas fa-paw" style="color: #F39C12; font-size: 1.2rem;"></i>
          <strong style="color: #AED6F1;">Animal Sense</strong>
        </div>
        <div>${message}</div>
      `;
      
      document.body.appendChild(notification);
      
      setTimeout(() => {
        notification.style.animation = 'slideOutRight 0.3s ease';
        setTimeout(() => notification.remove(), 300);
      }, 3000);
      
      // Add animation styles if not present
      if (!document.querySelector('#notification-animations')) {
        const style = document.createElement('style');
        style.id = 'notification-animations';
        style.textContent = `
          @keyframes slideInRight {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
          }
          @keyframes slideOutRight {
            from { transform: translateX(0); opacity: 1; }
            to { transform: translateX(100%); opacity: 0; }
          }
        `;
        document.head.appendChild(style);
      }
    }

    // Take empathy pledge
    function takeEmpathyPledge() {
      const counter = document.getElementById('pledgeCount');
      let count = parseInt(counter.textContent.replace(/,/g, ''));
      count++;
      counter.textContent = count.toLocaleString();
      
      const button = document.querySelector('button[onclick="takeEmpathyPledge()"]');
      const originalHTML = button.innerHTML;
      button.innerHTML = '<i class="fas fa-check"></i> Pledge Taken!';
      button.style.background = '#27AE60';
      button.style.borderColor = '#27AE60';
      button.style.color = 'white';
      button.disabled = true;
      
      // Create floating paws
      for (let i = 0; i < 3; i++) {
        createFloatingPaw();
      }
      
      setTimeout(() => {
        button.innerHTML = originalHTML;
        button.style.background = '';
        button.style.borderColor = '';
        button.style.color = '';
        button.disabled = false;
      }, 2000);
    }

    // Create floating paw animation
    function createFloatingPaw() {
      const paw = document.createElement('div');
      paw.innerHTML = '🐾';
      paw.style.cssText = `
        position: fixed;
        bottom: 50px;
        left: ${30 + Math.random() * 40}%;
        font-size: 2rem;
        z-index: 1000;
        animation: floatUpRotate 2s ease-out forwards;
        pointer-events: none;
        filter: drop-shadow(2px 2px 4px rgba(0,0,0,0.5));
      `;
      
      document.body.appendChild(paw);
      
      // Create animation
      const style = document.createElement('style');
      style.textContent = `
        @keyframes floatUpRotate {
          0% {
            transform: translateY(0) rotate(0deg) scale(1);
            opacity: 1;
          }
          100% {
            transform: translateY(-150px) rotate(360deg) scale(0.5);
            opacity: 0;
          }
        }
      `;
      document.head.appendChild(style);
      
      // Remove after animation
      setTimeout(() => paw.remove(), 2000);
    }

    // Initialize
    document.addEventListener('DOMContentLoaded', function() {
      // Set initial perspective
      setPerspective('human');
      
      // Add click outside to close panel
      document.addEventListener('click', function(e) {
        const panel = document.getElementById('perceptionPanel');
        if (panel.style.display === 'block' && 
            !panel.contains(e.target) && 
            !e.target.closest('.map-zone')) {
          closePanel();
        }
      });
      
      // Add keypress to close panel with Escape
      document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape') {
          closePanel();
        }
      });
      
      // Initialize animal guides
      updateAnimalGuides();
      
      // Start with road perspective
      setTimeout(() => showPerception('road'), 1000);
    });

    // Make functions available globally
    window.setPerspective = setPerspective;
    window.showPerception = showPerception;
    window.closePanel = closePanel;
    window.setAnimalPerspective = setAnimalPerspective;
    window.takeEmpathyPledge = takeEmpathyPledge;
  </script>
</body>
</html>